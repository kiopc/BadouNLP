from neo4j import GraphDatabase
import random

# 连接到 Neo4j 数据库
uri = "bolt://localhost:7687"
driver = GraphDatabase.driver(uri, auth=("neo4j", "******"))

# 定义疾病、症状、药物和科室列表
diseases = [
    "感冒", "流感", "肺炎", "支气管炎", "哮喘", "高血压", "冠心病", "心律失常",
    "糖尿病", "甲状腺功能亢进", "甲状腺功能减退", "胃炎", "胃溃疡", "十二指肠溃疡",
    "胆囊炎", "胆结石", "肝炎", "肝硬化", "肾炎", "肾衰竭", "膀胱炎", "尿道炎",
    "前列腺炎", "前列腺增生", "偏头痛", "紧张性头痛", "三叉神经痛", "坐骨神经痛",
    "关节炎", "类风湿关节炎", "痛风", "骨质疏松症", "颈椎病", "腰椎间盘突出症",
    "肩周炎", "腱鞘炎", "滑膜炎", "贫血", "白血病", "淋巴瘤", "过敏性鼻炎",
    "鼻窦炎", "中耳炎", "青光眼", "白内障", "近视", "远视", "散光", "口腔溃疡",
    "牙周炎", "龋齿", "痔疮", "肛裂", "肛瘘", "荨麻疹", "湿疹", "银屑病",
    "痤疮", "脂溢性皮炎", "白癜风", "斑秃", "失眠", "焦虑症", "抑郁症",
    "强迫症", "多动症", "自闭症", "癫痫", "帕金森病", "阿尔茨海默病",
    "小儿肺炎", "小儿腹泻", "小儿感冒", "小儿支气管炎", "小儿哮喘",
    "小儿贫血", "小儿佝偻病", "小儿多动症", "小儿自闭症", "小儿癫痫",
    "妊娠高血压", "妊娠糖尿病", "产后抑郁症", "乳腺炎", "乳腺增生",
    "子宫肌瘤", "卵巢囊肿", "宫颈炎", "阴道炎", "盆腔炎", "尿道炎",
    "膀胱炎", "肾盂肾炎", "肾结石", "输尿管结石", "膀胱结石", "前列腺炎",
    "前列腺增生", "附睾炎", "睾丸炎", "精囊炎", "精索静脉曲张",
    "性功能障碍", "不孕不育", "习惯性流产", "前置胎盘", "胎盘早剥",
    "羊水过多", "羊水过少", "胎儿窘迫", "胎膜早破", "产后出血",
    "产褥感染", "乳腺炎", "乳腺纤维瘤", "乳腺癌", "宫颈癌",
    "子宫内膜癌", "卵巢癌", "绒毛膜癌", "葡萄胎", "宫外孕",
    "尖锐湿疣", "梅毒", "淋病", "艾滋病", "疟疾", "登革热",
    "流感", "手足口病", "水痘", "麻疹", "风疹", "猩红热",
    "百日咳", "白喉", "破伤风", "狂犬病", "鼠疫", "霍乱",
    "炭疽", "布鲁氏菌病", "钩端螺旋体病", "血吸虫病", "疟疾",
    "黑热病", "包虫病", "丝虫病", "莱姆病", "恙虫病", "蜱虫病"
]

symptoms = [
    "咳嗽", "发热", "流鼻涕", "头痛", "咽痛", "乏力", "肌肉酸痛",
    "呼吸困难", "胸痛", "心悸", "腹痛", "腹泻", "恶心", "呕吐",
    "食欲不振", "多饮", "多食", "多尿", "体重减轻", "水肿", "尿频",
    "尿急", "尿痛", "血尿", "蛋白尿", "关节疼痛", "肿胀", "僵硬",
    "活动受限", "视力下降", "眼痛", "眼红", "耳鸣", "听力下降",
    "鼻塞", "流涕", "打喷嚏", "鼻出血", "牙痛", "牙龈出血",
    "口腔溃疡", "口臭", "皮疹", "瘙痒", "红斑", "水疱", "脓疱",
    "鳞屑", "脱发", "失眠", "多梦", "焦虑", "抑郁", "烦躁",
    "记忆力减退", "注意力不集中", "抽搐", "昏迷", "黄疸", "紫癜",
    "盗汗", "自汗", "畏寒", "发热", "寒战", "咳嗽", "咳痰",
    "喘息", "气短", "胸闷", "胸痛", "心悸", "心慌", "头晕",
    "眩晕", "黑矇", "晕厥", "乏力", "疲倦", "虚弱", "食欲不振",
    "恶心", "呕吐", "腹痛", "腹胀", "腹泻", "便秘", "便血",
    "呕血", "黄疸", "水肿", "尿频", "尿急", "尿痛", "血尿",
    "蛋白尿", "腰痛", "关节痛", "肌肉痛", "头痛", "咽痛",
    "咳嗽", "咳痰", "喘息", "气短", "胸闷", "胸痛", "心悸",
    "心慌", "头晕", "眩晕", "黑矇", "晕厥", "乏力", "疲倦",
    "虚弱", "食欲不振", "恶心", "呕吐", "腹痛", "腹胀",
    "腹泻", "便秘", "便血", "呕血", "黄疸", "水肿", "尿频",
    "尿急", "尿痛", "血尿", "蛋白尿", "腰痛", "关节痛",
    "肌肉痛"
]

medicines = [
    "感冒灵颗粒", "布洛芬", "阿莫西林", "头孢克肟", "阿奇霉素",
    "硝苯地平缓释片", "氨氯地平", "二甲双胍", "胰岛素", "甲巯咪唑",
    "左甲状腺素钠片", "奥美拉唑", "雷贝拉唑", "铝碳酸镁咀嚼片",
    "消炎利胆片", "熊去氧胆酸胶囊", "恩替卡韦", "阿德福韦酯",
    "金水宝胶囊", "百令胶囊", "三金片", "左氧氟沙星", "前列康",
    "非那雄胺", "布洛芬缓释胶囊", "对乙酰氨基酚", "卡马西平",
    "加巴喷丁", "双氯芬酸钠", "美洛昔康", "别嘌醇", "苯溴马隆",
    "碳酸钙D3片", "阿仑膦酸钠", "颈复康颗粒", "腰痛宁胶囊",
    "布洛芬乳膏", "云南白药膏", "硫酸亚铁", "叶酸", "维生素B12",
    "环孢素", "甲氨蝶呤", "氯雷他定", "西替利嗪", "糠酸莫米松鼻喷雾剂",
    "氧氟沙星滴耳液", "玻璃酸钠滴眼液", "氯霉素滴眼液", "珍视明滴眼液",
    "西瓜霜含片", "甲硝唑含漱液", "马应龙麝香痔疮膏", "太宁栓",
    "炉甘石洗剂", "地塞米松软膏", "他克莫司软膏", "维A酸乳膏",
    "酮康唑洗剂", "米诺地尔酊", "佐匹克隆", "艾司唑仑", "帕罗西汀",
    "舍曲林", "氟西汀", "氯氮平", "奥氮平", "利培酮", "丙戊酸钠",
    "卡马西平", "苯妥英钠", "左旋多巴", "金刚烷胺", "多奈哌齐",
    "美金刚", "小儿氨酚黄那敏颗粒", "蒙脱石散", "双歧杆菌四联活菌片",
    "小儿肺热咳喘口服液", "小儿化痰止咳颗粒", "小儿七星茶颗粒",
    "小儿碳酸钙D3颗粒", "小儿智力糖浆", "小儿癫痫宁片",
    "拉贝洛尔", "硝苯地平片", "胰岛素", "甲钴胺", "逍遥丸",
    "乳癖消片", "桂枝茯苓胶囊", "甲硝唑栓", "克霉唑栓", "妇炎康片",
    "三金片", "左氧氟沙星", "前列康", "非那雄胺", "布洛芬缓释胶囊",
    "对乙酰氨基酚", "卡马西平", "加巴喷丁", "双氯芬酸钠",
    "美洛昔康", "别嘌醇", "苯溴马隆", "碳酸钙D3片", "阿仑膦酸钠",
    "颈复康颗粒", "腰痛宁胶囊", "布洛芬乳膏", "云南白药膏",
    "硫酸亚铁", "叶酸", "维生素B12", "环孢素", "甲氨蝶呤",
    "氯雷他定", "西替利嗪", "糠酸莫米松鼻喷雾剂", "氧氟沙星滴耳液",
    "玻璃酸钠滴眼液", "氯霉素滴眼液", "珍视明滴眼液",
    "西瓜霜含片", "甲硝唑含漱液", "马应龙麝香痔疮膏", "太宁栓",
    "炉甘石洗剂", "地塞米松软膏", "他克莫司软膏", "维A酸乳膏",
    "酮康唑洗剂", "米诺地尔酊", "佐匹克隆", "艾司唑仑", "帕罗西汀",
    "舍曲林", "氟西汀", "氯氮平", "奥氮平", "利培酮", "丙戊酸钠",
    "卡马西平", "苯妥英钠", "左旋多巴", "金刚烷胺", "多奈哌齐",
    "美金刚"
]

departments = [
    "呼吸内科", "心血管内科", "内分泌科", "消化内科", "肾内科",
    "泌尿外科", "男科", "妇产科", "儿科", "眼科", "耳鼻喉科",
    "口腔科", "皮肤科", "神经内科", "精神心理科", "骨科",
    "风湿免疫科", "血液科", "肿瘤科", "感染科", "急诊科",
    "康复科", "中医科", "针灸推拿科", "重症医学科"
]

# 生成 500 条数据，增加多对多关系的多样性
data = []
for _ in range(500):
    disease = random.choice(diseases)
    # 随机选择 1 - 5 个症状
    num_symptoms = random.randint(1, 5)
    # 随机选择 1 - 4 种药物
    num_medicines = random.randint(1, 4)
    # 随机选择 1 - 3 个科室
    num_departments = random.randint(1, 3)

    selected_symptoms = random.sample(symptoms, num_symptoms)
    selected_medicines = random.sample(medicines, num_medicines)
    selected_departments = random.sample(departments, num_departments)

    data.append({
        "disease": disease,
        "symptoms": selected_symptoms,
        "medicines": selected_medicines,
        "departments": selected_departments
    })


# 写入数据的函数
def write_medical_data(tx, data):
    for item in data:
        disease = item["disease"]
        # 创建疾病节点
        tx.run("MERGE (d:Disease {name: $disease})", disease=disease)

        # 创建症状节点并建立关系
        for symptom in item["symptoms"]:
            tx.run("MERGE (s:Symptom {name: $symptom}) "
                   "MERGE (d:Disease {name: $disease})-[:HAS_SYMPTOM]->(s)",
                   symptom=symptom, disease=disease)

        # 创建药物节点并建立关系
        for medicine in item["medicines"]:
            tx.run("MERGE (m:Medicine {name: $medicine}) "
                   "MERGE (d:Disease {name: $disease})-[:TREATABLE_BY]->(m)",
                   medicine=medicine, disease=disease)

        # 创建科室节点并建立关系
        for department in item["departments"]:
            tx.run("MERGE (de:Department {name: $department}) "
                   "MERGE (d:Disease {name: $disease})-[:SHOULD_VISIT]->(de)",
                   department=department, disease=disease)


# 执行写入操作
with driver.session() as session:
    session.execute_write(write_medical_data, data)

# 关闭驱动程序
driver.close()
